webpackJsonp([1],{"+DlJ":function(e,t){},"/3T2":function(e,t){},0:function(e,t){},"4wC2":function(e,t){},Agrm:function(e,t){},GpaC:function(e,t){},JyyD:function(e,t){},MZc8:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};a.d(o,"host",function(){return fe}),a.d(o,"https",function(){return he}),a.d(o,"timeAgo",function(){return ve}),a.d(o,"unescape",function(){return be});var l=a("fZjL"),s=a.n(l),r=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"app"},n,!1,function(e){a("wL4e")},null,null).exports,d=a("/ocq"),c=a("mvHQ"),m=a.n(c),u={data:function(){return{dataList:[],name:"",phone:"",addr:"",detailAddr:"",openid:"",currentPage:1,pageSize:10,totalSize:0}},created:function(){this.dataChange()},methods:{create:function(){this.jump("/main/addressCreate")},update:function(e){var t={_id:e._id,name:e.name,phone:e.phone,addr:e.addr,detailAddr:e.detailAddr,tag:e.tag,openid:e.openid,state:e.state,delId:e.delId};localStorage.setItem("address",m()(t)),this.jump("/main/addressCreate")},deletes:function(e){var t=this;t.request("api/address/delete",{method:"POST",data:{_id:e},success:function(a){if(a.data.success)for(var o=0;o<t.dataList.length;o++)t.dataList[o]._id==e&&(t.dataList.splice(o,1),t.totalSize-=1);else t.$message(a.data.data)}})},search:function(){this.currentPage=1,this.dataChange()},handleSizeChange:function(e){this.pageSize=e,this.dataChange()},handleCurrentChange:function(e){this.currentPage=e,this.dataChange()},dataChange:function(){var e=this,t={name:e.name,phone:e.phone,addr:e.addr,detailAddr:e.detailAddr,openid:e.openid,state:e.state,pageSize:e.pageSize,currentPage:e.currentPage};e.request("api/address/find",{method:"POST",data:t,success:function(t){if(console.log(t),t.data.success){for(var a=t.data.data,o=0;o<a.length;o++)a[o].created=e.format(new Date(a[o].created),"yyyy-MM-dd hh:mm:ss"),a[o].updated=e.format(new Date(a[o].updated),"yyyy-MM-dd hh:mm:ss");e.dataList=a,e.totalSize=t.data.total}else e.$message(t.data.data)}})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"mt20b20",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"姓名","prefix-icon":"el-icon-search"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"电话","prefix-icon":"el-icon-search"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"地址","prefix-icon":"el-icon-search"},model:{value:e.addr,callback:function(t){e.addr=t},expression:"addr"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"具体地址","prefix-icon":"el-icon-search"},model:{value:e.detailAddr,callback:function(t){e.detailAddr=t},expression:"detailAddr"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"openid","prefix-icon":"el-icon-search"},model:{value:e.openid,callback:function(t){e.openid=t},expression:"openid"}})],1)],1),e._v(" "),a("el-row",{staticClass:"mt20b20"},[a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),a("div",{staticStyle:{width:"1200px",margin:"auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","header-cell-style":"text-align:center;"}},[a("el-table-column",{attrs:{prop:"_id",label:"_id",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addr",label:"地址",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detailAddr",label:"具体地址",width:"230"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tag",label:"标签",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openid",label:"openid",width:"190","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"state",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"delId",label:"delId",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created",label:"created",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"updated",label:"updated",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.update(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.deletes(t.row._id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block mt20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("UYaa")},"data-v-28015da9",null).exports,h={name:"login",data:function(){return{form:{name:"",phone:"",addr:"",detailAddr:"",tag:"",openid:"",state:"",delId:0}}},created:function(){var e=localStorage.getItem("address");e&&!this.isEmptyObject(e)&&(this.form=JSON.parse(e),localStorage.removeItem("address"))},methods:{submit:function(){var e=this;e.request("api/address/createAndUpdate",{method:"POST",data:e.form,success:function(t){e.jump("/main/address")}})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"form"},[a("p",{staticClass:"title"},[e._v(e._s(e.form._id?"修改":"新增")+"地址")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"phone"}},[a("el-input",{attrs:{placeholder:"phone"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"addr"}},[a("el-input",{attrs:{placeholder:"addr"},model:{value:e.form.addr,callback:function(t){e.$set(e.form,"addr",t)},expression:"form.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"detailAddr"}},[a("el-input",{attrs:{placeholder:"detailAddr"},model:{value:e.form.detailAddr,callback:function(t){e.$set(e.form,"detailAddr",t)},expression:"form.detailAddr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"tag"}},[a("el-input",{attrs:{placeholder:"tag"},model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"openid"}},[a("el-input",{attrs:{placeholder:"openid"},model:{value:e.form.openid,callback:function(t){e.$set(e.form,"openid",t)},expression:"form.openid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"state"}},[a("el-input",{attrs:{placeholder:"state"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"delId"}},[a("el-input",{attrs:{placeholder:"delId"},model:{value:e.form.delId,callback:function(t){e.$set(e.form,"delId",t)},expression:"form.delId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]};var g=a("VU/8")(h,v,!1,function(e){a("PsJx")},"data-v-7477b02b",null).exports,b={data:function(){return{dataList:[],createdFrom:"",createdTo:"",sendTimeFrom:"",sendTimeTo:"",currentPage:1,pageSize:10,totalSize:0,goodsList:[],goodsArr:[],totalNum:0,totalMoney:0}},created:function(){var e=this;e.request("api/goods/findAll",{method:"POST",data:{},success:function(t){t.data.success&&(e.goodsList=t.data.data,console.log("self.goodsList data"),console.log(t.data.data),e.dataChange())}})},methods:{search:function(){this.currentPage=1,this.dataChange()},handleSizeChange:function(e){this.pageSize=e,this.dataChange()},handleCurrentChange:function(e){this.currentPage=e,this.dataChange()},dataChange:function(){var e=this,t={createdFrom:e.createdFrom,createdTo:e.createdTo,sendTimeFrom:e.sendTimeFrom,sendTimeTo:e.sendTimeTo,pageSize:e.pageSize,currentPage:e.currentPage};e.request("api/count/find",{method:"POST",data:t,success:function(t){if(t.data.success){console.log("count find"),console.log(m()(t.data.data)),console.log("count find goodsArr"),console.log(m()(t.data.goodsArr));for(var a=t.data.data,o=0;o<a.length;o++)a[o].created=e.format(new Date(a[o].created),"yyyy-MM-dd hh:mm:ss"),a[o].updated=e.format(new Date(a[o].updated),"yyyy-MM-dd hh:mm:ss");e.dataList=a,e.totalSize=t.data.total;var l=e.goodsList,s=t.data.goodsArr;for(o=0;o<s.length;o++)for(var r=0;r<l.length;r++)s[o].goodsId==l[r]._id&&(s[o].name=l[r].name);e.goodsArr=s,e.totalNum=t.data.totalNum,e.totalMoney=t.data.totalMoney}else e.$message(t.data.data)}})},showAddrGoods:function(e,t,a,o){var l=this;if("送货地址id"==t.label)l.request("api/address/find",{method:"POST",data:{_id:e.addrId},success:function(e){if(e.data.success){var t=e.data.data[0];console.log("送货地址id data"),console.log(t);var a="<div>";for(var o in t)a+='<div><span style="display:inline-block;width:100px;text-align:right;padding-right:20px;">'+o+": </span>"+t[o]+"</div>";a+="</div>",l.$alert(a,"地址详情",{dangerouslyUseHTMLString:!0})}else l.$message(e.data.data)}});else if("订购详情"==t.label){console.log(e.goods);var s=e.goods,r=l.goodsList,n="<div>";console.log(l.goodsList);for(var i=0;i<s.length;i++)for(var d=0;d<r.length;d++)s[i].goodsId==r[d]._id&&(n+='<div><span style="display:inline-block;width:100px;text-align:right;padding-right:20px;">'+r[d].name+": </span>"+s[i].num+"</div>");n+="</div>",l.$alert(n,"订购详情",{dangerouslyUseHTMLString:!0})}}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"mt20b20",attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"订单时间起","prefix-icon":"el-icon-search"},model:{value:e.createdFrom,callback:function(t){e.createdFrom=t},expression:"createdFrom"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"订单时间止","prefix-icon":"el-icon-search"},model:{value:e.createdTo,callback:function(t){e.createdTo=t},expression:"createdTo"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"要求送达时间起","prefix-icon":"el-icon-search"},model:{value:e.sendTimeFrom,callback:function(t){e.sendTimeFrom=t},expression:"sendTimeFrom"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"要求送达时间止","prefix-icon":"el-icon-search"},model:{value:e.sendTimeTo,callback:function(t){e.sendTimeTo=t},expression:"sendTimeTo"}})],1)],1),e._v(" "),a("el-row",{staticClass:"mt20b20"},[a("el-button",{attrs:{type:"warning"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),a("div",{staticStyle:{width:"1200px",margin:"auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.goodsArr,border:"","header-cell-style":"text-align:center;"}},[a("el-table-column",{attrs:{prop:"goodsId",label:"商品id",width:"350"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"priceNum",label:"价格 * 数量 = 金额",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.priceNum,function(t){return a("div",[e._v("\n              "+e._s(t.price)+" "),a("span",{staticClass:"cred"},[e._v(" X ")]),e._v(" "+e._s(t.num)+" "),a("span",{staticClass:"cred"},[e._v(" = ")]),e._v(" "+e._s(t.price*t.num)+"\n            ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalMoney",label:"商品总金额",width:"210"}})],1)],1),e._v(" "),a("div",{staticStyle:{margin:"20px 0"}},[a("span",[e._v("总数量： ")]),e._v(" "),a("span",{staticStyle:{"font-size":"30px",color:"red","margin-right":"20px"}},[e._v(e._s(e.totalNum))]),e._v(" "),a("span",[e._v("总金额：")]),e._v(" "),a("span",{staticStyle:{"font-size":"30px",color:"red"}},[e._v(e._s(e.totalMoney))])]),e._v(" "),a("div",{staticStyle:{width:"1200px",margin:"auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","header-cell-style":"text-align:center;"},on:{"cell-click":e.showAddrGoods}},[a("el-table-column",{attrs:{prop:"_id",label:"_id",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"addrId",label:"地址id",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"sendTime",label:"要求时间",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payType",label:"支付方式",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods",label:"订购详情",width:"270","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.goods,function(t){return a("div",[e._v("\n              "+e._s(t.goodsId)+" "),a("span",{staticClass:"cred"},[e._v("X")]),e._v(" "+e._s(t.num)+" "),a("span",{staticClass:"cred"},[e._v("X")]),e._v(" "+e._s(t.price)+"\n            ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"explain",label:"备注说明",width:"170","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"openid",label:"openid",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arriveTime",label:"送达时间",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"evaluate",label:"评价",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"print",label:"打印",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"printNum",label:"打印数",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"delId",label:"删除标记",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalMoney",label:"金额",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created",label:"下单时间",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"updated",label:"修改时间",width:"50","show-overflow-tooltip":!0}})],1)],1),e._v(" "),a("div",{staticClass:"block mt20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var w=a("VU/8")(b,_,!1,function(e){a("h/rS")},"data-v-7f895fa4",null).exports,y={data:function(){return{dataList:[],currentPage:1,pageSize:10,totalSize:0}},created:function(){this.dataChange()},methods:{create:function(){this.jump("/main/evaluateCreate")},update:function(e){var t={_id:e._id,avatarUrl:e.avatarUrl,sendStar:e.sendStar,tasteStar:e.tasteStar,packStar:e.packStar,explain:e.explain,imgs:e.imgs,openid:e.openid,delId:e.delId};localStorage.setItem("evaluate",m()(t)),this.jump("/main/evaluateCreate")},deletes:function(e){var t=this;t.request("api/evaluate/delete",{method:"POST",data:{_id:e},success:function(a){if(a.data.success)for(var o=0;o<t.dataList.length;o++)t.dataList[o]._id==e&&(t.dataList.splice(o,1),t.totalSize-=1);else t.$message(a.data.data)}})},showPic:function(e,t,a,o){if("图片地址"==t.label){for(var l='<div style="text-align:center;display:flex;flex-direction:row;">',s=0;s<e.imgs.length;s++)l+='<img style="border:1px solid #eee;" src="'+this.const().IP+e.imgs[s]+'"/>';l+="</div>",this.$alert(l,"图片效果",{dangerouslyUseHTMLString:!0})}},handleSizeChange:function(e){this.pageSize=e,this.dataChange()},handleCurrentChange:function(e){this.currentPage=e,this.dataChange()},dataChange:function(){var e=this,t={pageSize:e.pageSize,currentPage:e.currentPage};e.request("api/evaluate/find",{method:"POST",data:t,success:function(t){if(t.data.success){console.log(t.data.data);for(var a=t.data.data,o=0;o<a.length;o++)a[o].created=e.format(new Date(a[o].created),"yyyy-MM-dd hh:mm:ss"),a[o].updated=e.format(new Date(a[o].updated),"yyyy-MM-dd hh:mm:ss");e.dataList=a,e.totalSize=t.data.total}else e.$message(t.data.data)}})}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"mt20b20"},[a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("新增")])],1),e._v(" "),a("div",{staticStyle:{width:"1200px",margin:"auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","header-cell-style":"text-align:center;"},on:{"cell-click":e.showPic}},[a("el-table-column",{attrs:{prop:"_id",label:"_id",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"avatarUrl",label:"图标地址",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"sendStar",label:"配送星",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tasteStar",label:"口味星",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"packStar",label:"包装星",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"explain",label:"说明",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"imgs",label:"图片地址",width:"390","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"openid",label:"openid",width:"190","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"delId",label:"delId",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created",label:"created",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"updated",label:"updated",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.update(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.deletes(t.row._id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block mt20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var S=a("VU/8")(y,x,!1,function(e){a("W8LF")},"data-v-707322d0",null).exports,I={name:"login",data:function(){return{form:{avatarUrl:"",sendStar:"",tasteStar:"",packStar:"",explain:"",openid:"",imgs:[],delId:0},imgs:[],imgInput:""}},created:function(){this.imgInput=this.const().IP+"public/images/upload.png";var e=localStorage.getItem("evaluate");if(e&&!this.isEmptyObject(e)){this.form=JSON.parse(e);for(var t=0;t<this.form.imgs.length;t++)console.log(this.form.imgs[t]),this.imgs[t]=this.const().IP+this.form.imgs[t];localStorage.removeItem("evaluate")}},methods:{submit:function(){var e=this;e.request("api/evaluate/createAndUpdate",{method:"POST",data:e.form,success:function(t){e.jump("/main/evaluate")}})},onfilechange:function(e){var t=this;t.imgUpload(e,function(e){t.form.imgs.push(e.data.data),t.imgs.push(t.const().IP+e.data.data)})},del:function(e){this.form.imgs.splice(e,1),this.imgs.splice(e,1)}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"form"},[a("p",{staticClass:"title"},[e._v(e._s(e.form._id?"修改":"新增")+"评价")]),e._v(" "),a("div",{staticStyle:{display:"flex","flex-direction":"row"}},[e._l(e.imgs,function(t,o){return a("div",{staticClass:"upload bgsize rel",style:{"background-image":"url("+t+")"}},[a("div",{staticClass:"del",on:{click:function(t){e.del(o)}}},[e._v("X")])])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imgs.length<3,expression:"imgs.length < 3"}],staticClass:"upload",style:{"background-image":"url("+e.imgInput+")"}},[a("input",{attrs:{type:"file",name:"imgs",id:"photo"},on:{change:e.onfilechange}})])],2),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"图标地址"}},[a("el-input",{attrs:{placeholder:"avatarUrl"},model:{value:e.form.avatarUrl,callback:function(t){e.$set(e.form,"avatarUrl",t)},expression:"form.avatarUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配送星"}},[a("el-input",{attrs:{placeholder:"sendStar"},model:{value:e.form.sendStar,callback:function(t){e.$set(e.form,"sendStar",t)},expression:"form.sendStar"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"口味星"}},[a("el-input",{attrs:{placeholder:"tasteStar"},model:{value:e.form.tasteStar,callback:function(t){e.$set(e.form,"tasteStar",t)},expression:"form.tasteStar"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"包装星"}},[a("el-input",{attrs:{placeholder:"packStar"},model:{value:e.form.packStar,callback:function(t){e.$set(e.form,"packStar",t)},expression:"form.packStar"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"说明"}},[a("el-input",{attrs:{placeholder:"explain"},model:{value:e.form.explain,callback:function(t){e.$set(e.form,"explain",t)},expression:"form.explain"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"openid"}},[a("el-input",{attrs:{placeholder:"openid"},model:{value:e.form.openid,callback:function(t){e.$set(e.form,"openid",t)},expression:"form.openid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"delId"}},[a("el-input",{attrs:{placeholder:"delId"},model:{value:e.form.delId,callback:function(t){e.$set(e.form,"delId",t)},expression:"form.delId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]};var C=a("VU/8")(I,k,!1,function(e){a("Pfec")},"data-v-f1cfb804",null).exports,T={data:function(){return{dataList:[],currentPage:1,pageSize:10,totalSize:0}},created:function(){this.dataChange()},methods:{create:function(){this.jump("/main/goodsCreate")},update:function(e){var t={_id:e._id,photo:e.photo,name:e.name,explain:e.explain,sendNum:e.sendNum,totalNum:e.totalNum,praise:e.praise,price:e.price,sellout:e.sellout,delId:e.delId};localStorage.setItem("goods",m()(t)),this.jump("/main/goodsCreate")},deletes:function(e){var t=this;t.request("api/goods/delete",{method:"POST",data:{_id:e},success:function(a){if(a.data.success)for(var o=0;o<t.dataList.length;o++)t.dataList[o]._id==e&&(t.dataList.splice(o,1),t.totalSize-=1);else this.$message(a.data.data)}})},showPic:function(e,t,a,o){if(console.log(e.photo),console.log(t.label),console.log(a),console.log(o),"图片地址"==t.label){var l=this.const().IP+e.photo;this.$alert('<div style="text-align:center;"><img style="border:1px solid #eee;" src="'+l+'"/></div>',"图片效果",{dangerouslyUseHTMLString:!0})}},handleSizeChange:function(e){this.pageSize=e,this.dataChange()},handleCurrentChange:function(e){this.currentPage=e,this.dataChange()},dataChange:function(){var e=this,t={name:e.name,phone:e.phone,addr:e.addr,detailAddr:e.detailAddr,openid:e.openid,sellout:e.sellout,pageSize:e.pageSize,currentPage:e.currentPage};e.request("api/goods/find",{method:"POST",data:t,success:function(t){if(t.data.success){for(var a=t.data.data,o=0;o<a.length;o++)a[o].created=e.format(new Date(a[o].created),"yyyy-MM-dd hh:mm:ss"),a[o].updated=e.format(new Date(a[o].updated),"yyyy-MM-dd hh:mm:ss");e.dataList=a,e.totalSize=t.data.total}else this.$message(t.data.data)}})}}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"mt20b20"},[a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("新增")])],1),e._v(" "),a("div",{staticStyle:{width:"1200px",margin:"auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","header-cell-style":"text-align:center;"},on:{"cell-click":e.showPic}},[a("el-table-column",{attrs:{prop:"_id",label:"_id",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"photo",label:"图片地址",width:"220","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商品名",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"explain",label:"说明",width:"260"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sendNum",label:"月售",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalNum",label:"总销量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"praise",label:"好评",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sellout",label:"售完",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"delId",label:"delId",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created",label:"created",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"updated",label:"updated",width:"100","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.update(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.deletes(t.row._id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block mt20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var P=a("VU/8")(T,z,!1,function(e){a("MZc8")},"data-v-a31d70fa",null).exports,$=a("DmT9"),L=a.n($),N={name:"login",data:function(){return{form:{name:"",explain:"",sendNum:0,totalNum:0,praise:"",price:"",photo:"",sellout:0,delId:0},img:"",selloutInit:null}},created:function(){this.img=this.const().IP+"public/images/upload.png";var e=localStorage.getItem("goods");e&&!this.isEmptyObject(e)&&(this.form=JSON.parse(e),this.img=this.const().IP+this.form.photo,this.selloutInit=this.form.sellout,localStorage.removeItem("goods"))},methods:{submit:function(){var e=this;e.request("api/goods/createAndUpdate",{method:"POST",data:e.form,success:function(t){console.log("submit res"),console.log(t);var a=JSON.parse(t.config.data);(console.log(a),a._id&&e.selloutInit==a.sellout)||L.a.connect(e.const().IP).emit("goodsSellout",{_id:a._id||t.data.data._id,sellout:a.sellout});e.jump("/main/goods")}})},onfilechange:function(e){var t=this;t.imgUpload(e,function(e){t.form.photo=e.data.data,t.img=t.const().IP+e.data.data})}}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"form"},[a("p",{staticClass:"title"},[e._v(e._s(e.form._id?"修改":"新增")+"商品")]),e._v(" "),a("div",{staticClass:"upload",style:{"background-image":"url("+e.img+")"}},[a("input",{attrs:{type:"file",name:"photo",id:"photo"},on:{change:e.onfilechange}})]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"商品名"}},[a("el-input",{attrs:{placeholder:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"说明"}},[a("el-input",{attrs:{placeholder:"explain"},model:{value:e.form.explain,callback:function(t){e.$set(e.form,"explain",t)},expression:"form.explain"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"月售"}},[a("el-input",{attrs:{placeholder:"sendNum"},model:{value:e.form.sendNum,callback:function(t){e.$set(e.form,"sendNum",t)},expression:"form.sendNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总销量"}},[a("el-input",{attrs:{placeholder:"totalNum"},model:{value:e.form.totalNum,callback:function(t){e.$set(e.form,"totalNum",t)},expression:"form.totalNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"好评"}},[a("el-input",{attrs:{placeholder:"praise"},model:{value:e.form.praise,callback:function(t){e.$set(e.form,"praise",t)},expression:"form.praise"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{attrs:{placeholder:"price"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"售完"}},[a("el-input",{attrs:{placeholder:"sellout"},model:{value:e.form.sellout,callback:function(t){e.$set(e.form,"sellout",t)},expression:"form.sellout"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"delId"}},[a("el-input",{attrs:{placeholder:"delId"},model:{value:e.form.delId,callback:function(t){e.$set(e.form,"delId",t)},expression:"form.delId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]};var U=a("VU/8")(N,M,!1,function(e){a("OWj8")},"data-v-f5dcf6fe",null).exports,A={data:function(){return{dataList:[],addrId:"",sendTime:"",state:"",arriveTime:"",openid:"",evaluate:"",print:"",printNum:"",currentPage:1,pageSize:10,totalSize:0,goodsList:[]}},created:function(){var e=this;e.dataChange(),e.request("api/goods/findAll",{method:"POST",data:{},success:function(t){t.data.success&&(e.goodsList=t.data.data,console.log("self.goodsList data"),console.log(t.data.data))}})},methods:{create:function(){this.jump("/main/orderCreate")},update:function(e){var t={_id:e._id,addrId:e.addrId,sendTime:e.sendTime,payType:e.payType,goods:e.goods,explain:e.explain,state:e.state,arriveTime:e.arriveTime,openid:e.openid,evaluate:e.evaluate,print:e.print,printNum:e.printNum,delId:e.delId,totalMoney:e.totalMoney};localStorage.setItem("order",m()(t)),this.jump("/main/orderCreate")},deletes:function(e){var t=this;t.request("api/order/delete",{method:"POST",data:{_id:e},success:function(a){if(a.data.success)for(var o=0;o<t.dataList.length;o++)t.dataList[o]._id==e&&(t.dataList.splice(o,1),t.totalSize-=1);t.$message(a.data.data)}})},printOrder:function(e){var t=this;t.request("api/order/print",{method:"POST",data:{_id:e},success:function(a){if(a.data.success)for(var o=0;o<t.dataList.length;o++)t.dataList[o]._id==e&&(t.dataList[o].print=1,t.dataList[o].printNum+=1);t.$message(a.data.data)}})},search:function(){this.currentPage=1,this.dataChange()},handleSizeChange:function(e){this.pageSize=e,this.dataChange()},handleCurrentChange:function(e){this.currentPage=e,this.dataChange()},dataChange:function(){var e=this,t={addrId:e.addrId,sendTime:e.sendTime,state:e.state,arriveTime:e.arriveTime,openid:e.openid,evaluate:e.evaluate,print:e.print,printNum:e.printNum,pageSize:e.pageSize,currentPage:e.currentPage};e.request("api/order/find",{method:"POST",data:t,success:function(t){if(t.data.success){for(var a=t.data.data,o=0;o<a.length;o++)a[o].arriveTime=e.format(new Date(a[o].arriveTime),"yyyy-MM-dd hh:mm:ss"),a[o].created=e.format(new Date(a[o].created),"yyyy-MM-dd hh:mm:ss"),a[o].updated=e.format(new Date(a[o].updated),"yyyy-MM-dd hh:mm:ss");e.dataList=a,e.totalSize=t.data.total}else e.$message(t.data.data)}})},showAddrGoods:function(e,t,a,o){var l=this;if("送货地址id"==t.label)l.request("api/address/find",{method:"POST",data:{_id:e.addrId},success:function(e){if(e.data.success){var t=e.data.data[0];console.log("送货地址id data"),console.log(t);var a="<div>";for(var o in t)a+='<div><span style="display:inline-block;width:100px;text-align:right;padding-right:20px;">'+o+": </span>"+t[o]+"</div>";a+="</div>",l.$alert(a,"地址详情",{dangerouslyUseHTMLString:!0})}else l.$message(e.data.data)}});else if("订购详情"==t.label){console.log(e.goods);var s=e.goods,r=l.goodsList,n="<div>";console.log(l.goodsList);for(var i=0;i<s.length;i++)for(var d=0;d<r.length;d++)s[i].goodsId==r[d]._id&&(n+='<div><span style="display:inline-block;width:100px;text-align:right;padding-right:20px;">'+r[d].name+": </span>"+s[i].num+"</div>");n+="</div>",l.$alert(n,"订购详情",{dangerouslyUseHTMLString:!0})}}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"mt20b20",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"送货地址id","prefix-icon":"el-icon-search"},model:{value:e.addrId,callback:function(t){e.addrId=t},expression:"addrId"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"要求时间","prefix-icon":"el-icon-search"},model:{value:e.sendTime,callback:function(t){e.sendTime=t},expression:"sendTime"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"状态","prefix-icon":"el-icon-search"},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"送达时间","prefix-icon":"el-icon-search"},model:{value:e.arriveTime,callback:function(t){e.arriveTime=t},expression:"arriveTime"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"openid","prefix-icon":"el-icon-search"},model:{value:e.openid,callback:function(t){e.openid=t},expression:"openid"}})],1)],1),e._v(" "),a("el-row",{staticClass:"mt20b20"},[a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),a("div",{staticStyle:{width:"1200px",margin:"auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","header-cell-style":"text-align:center;"},on:{"cell-click":e.showAddrGoods}},[a("el-table-column",{attrs:{prop:"_id",label:"_id",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"addrId",label:"送货地址id",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sendTime",label:"要求时间",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payType",label:"支付方式",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods",label:"订购详情",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.goods,function(t){return a("div",[e._v("\n              "+e._s(t.goodsId)+" "),a("span",{staticClass:"cred"},[e._v("X")]),e._v(" "+e._s(t.num)+" "),a("span",{staticClass:"cred"},[e._v("X")]),e._v(" "+e._s(t.price)+"\n            ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"explain",label:"备注说明",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openid",label:"openid",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"arriveTime",label:"送达时间",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"evaluate",label:"评价",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"print",label:"打印",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"printNum",label:"打印数",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"delId",label:"delId",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalMoney",label:"totalMoney",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created",label:"created",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"updated",label:"updated",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.printOrder(t.row._id)}}},[e._v("打印")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.update(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.deletes(t.row._id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block mt20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var F=a("VU/8")(A,O,!1,function(e){a("JyyD")},"data-v-1ae1e893",null).exports,j={name:"login",data:function(){return{form:{addrId:"",sendTime:"",payType:"",goods:[],explain:"",state:"",arriveTime:"",openid:"",evaluate:"",print:"",printNum:"",delId:0,totalMoney:0},goodsId:"",num:"",price:""}},created:function(){var e=localStorage.getItem("order");e&&!this.isEmptyObject(e)&&(this.form=JSON.parse(e),localStorage.removeItem("order"))},methods:{submit:function(){var e=this;e.request("api/order/createAndUpdate",{method:"POST",data:e.form,success:function(t){e.jump("/main/order")}})},createGoods:function(){if(this.goodsId&&this.num&&this.price){var e={goodsId:this.goodsId,num:this.num,price:this.price};this.form.goods.push(e),this.goodsId="",this.num="",this.price=""}else this.$message("goodsId和num和price不能为空")},del:function(e){console.log(e),this.form.goods.splice(e,1)}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"form"},[a("p",{staticClass:"title"},[e._v(e._s(e.form._id?"修改":"新增")+"订单")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"送货地址id"}},[a("el-input",{attrs:{placeholder:"addrId"},model:{value:e.form.addrId,callback:function(t){e.$set(e.form,"addrId",t)},expression:"form.addrId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"要求时间"}},[a("el-input",{attrs:{placeholder:"sendTime"},model:{value:e.form.sendTime,callback:function(t){e.$set(e.form,"sendTime",t)},expression:"form.sendTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付方式"}},[a("el-input",{attrs:{placeholder:"payType"},model:{value:e.form.payType,callback:function(t){e.$set(e.form,"payType",t)},expression:"form.payType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"订购详情"}},[a("el-input",{attrs:{placeholder:"goodsId"},model:{value:e.goodsId,callback:function(t){e.goodsId=t},expression:"goodsId"}}),e._v(" "),a("el-input",{attrs:{placeholder:"num"},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}}),e._v(" "),a("el-input",{attrs:{placeholder:"price"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}}),e._v(" "),e._l(e.form.goods,function(t,o){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.form.goods.length>0,expression:"form.goods.length > 0"}]},[e._v("\n          "+e._s(t.goodsId)+" X "+e._s(t.num)+" X "+e._s(t.price)+" "),a("span",{staticClass:"del",on:{click:function(t){e.del(o)}}},[e._v("X")])])}),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.createGoods}},[e._v("新增订购")])],2),e._v(" "),a("el-form-item",{attrs:{label:"说明"}},[a("el-input",{attrs:{placeholder:"explain"},model:{value:e.form.explain,callback:function(t){e.$set(e.form,"explain",t)},expression:"form.explain"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"openid"}},[a("el-input",{attrs:{placeholder:"openid"},model:{value:e.form.openid,callback:function(t){e.$set(e.form,"openid",t)},expression:"form.openid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-input",{attrs:{placeholder:"state"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"送达时间"}},[a("el-input",{attrs:{placeholder:"arriveTime"},model:{value:e.form.arriveTime,callback:function(t){e.$set(e.form,"arriveTime",t)},expression:"form.arriveTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否已评价"}},[a("el-input",{attrs:{placeholder:"evaluate"},model:{value:e.form.evaluate,callback:function(t){e.$set(e.form,"evaluate",t)},expression:"form.evaluate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否已打印"}},[a("el-input",{attrs:{placeholder:"print"},model:{value:e.form.print,callback:function(t){e.$set(e.form,"print",t)},expression:"form.print"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"打印数"}},[a("el-input",{attrs:{placeholder:"printNum"},model:{value:e.form.printNum,callback:function(t){e.$set(e.form,"printNum",t)},expression:"form.printNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"delId"}},[a("el-input",{attrs:{placeholder:"delId"},model:{value:e.form.delId,callback:function(t){e.$set(e.form,"delId",t)},expression:"form.delId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"totalMoney"}},[a("el-input",{attrs:{placeholder:"totalMoney"},model:{value:e.form.totalMoney,callback:function(t){e.$set(e.form,"totalMoney",t)},expression:"form.totalMoney"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]};var q=a("VU/8")(j,E,!1,function(e){a("+DlJ")},"data-v-73409534",null).exports,R={data:function(){return{dataList:[],currentPage:1,pageSize:10,totalSize:0}},created:function(){this.dataChange()},methods:{create:function(){this.jump("/main/sellerCreate")},update:function(e){var t={_id:e._id,storeName:e.storeName,mainImg:e.mainImg,distance:e.distance,sendTime:e.sendTime,saleNum:e.saleNum,distribute1:e.distribute1,distribute2:e.distribute2,storeImgs:e.storeImgs,phone:e.phone,addr:e.addr,businessTimeFrom:e.businessTimeFrom,businessTimeTo:e.businessTimeTo,businessImgs:e.businessImgs,state:e.state,rest:e.rest};localStorage.setItem("seller",m()(t)),this.jump("/main/sellerCreate")},deletes:function(e){var t=this;t.request("api/seller/delete",{method:"POST",data:{_id:e},success:function(a){if(a.data.success)for(var o=0;o<t.dataList.length;o++)t.dataList[o]._id==e&&(t.dataList.splice(o,1),t.totalSize-=1);else t.$message(a.data.data)}})},showPic:function(e,t,a,o){if(console.log(e.photo),console.log(t.label),console.log(a),console.log(o),"主图"==t.label){var l=this.const().IP+e.mainImg;this.$alert('<div style="text-align:center;"><img style="border:1px solid #eee;" src="'+l+'"/></div>',"图片效果",{dangerouslyUseHTMLString:!0})}else if("店铺图片"==t.label){for(var s='<div style="text-align:center;display:flex;flex-direction:row;">',r=0;r<e.storeImgs.length;r++)s+='<img style="border:1px solid #eee;" src="'+this.const().IP+e.storeImgs[r]+'"/>';s+="</div>",this.$alert(s,"图片效果",{dangerouslyUseHTMLString:!0})}else if("营业资质图片"==t.label){for(s='<div style="text-align:center;display:flex;flex-direction:row;">',r=0;r<e.businessImgs.length;r++)s+='<img style="border:1px solid #eee;" src="'+this.const().IP+e.businessImgs[r]+'"/>';s+="</div>",this.$alert(s,"图片效果",{dangerouslyUseHTMLString:!0})}},handleSizeChange:function(e){this.pageSize=e,this.dataChange()},handleCurrentChange:function(e){this.currentPage=e,this.dataChange()},dataChange:function(){var e=this,t={pageSize:e.pageSize,currentPage:e.currentPage};e.request("api/seller/find",{method:"POST",data:t,success:function(t){t.data.success?(e.dataList=t.data.data,e.totalSize=t.data.total):e.$message(t.data.data)}})}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"mt20b20"},[a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("新增")])],1),e._v(" "),a("div",{staticStyle:{width:"1200px",margin:"auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","header-cell-style":"text-align:center;"},on:{"cell-click":e.showPic}},[a("el-table-column",{attrs:{prop:"_id",label:"_id",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"storeName",label:"店名",width:"120","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"mainImg",label:"主图",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"distance",label:"距离",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sendTime",label:"送达时间",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleNum",label:"月售",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"distribute1",label:"配送信息1",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"distribute2",label:"配送信息2",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"storeImgs",label:"店铺图片",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addr",label:"地址",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"businessTimeFrom",label:"营业时间起",width:"60","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"businessTimeTo",label:"营业时间止",width:"60","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"businessImgs",label:"营业资质图片",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"使用状态",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rest",label:"休息情况",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.update(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.deletes(t.row._id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block mt20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var J=a("VU/8")(R,D,!1,function(e){a("GpaC")},"data-v-11ebe63b",null).exports,V={name:"login",data:function(){return{form:{storeName:"",mainImg:"",distance:"",sendTime:"",saleNum:"",distribute1:"",distribute2:"",storeImgs:[],phone:"",addr:"",businessTimeFrom:"",businessTimeTo:"",businessImgs:[],state:0,rest:0},mainImg:"",storeImgs:[],businessImgs:[],imgInput:"",restInit:"",businessTimeFromInit:"",businessTimeToInit:""}},created:function(){this.mainImg=this.const().IP+"public/images/upload.png",this.imgInput=this.const().IP+"public/images/upload.png";var e=localStorage.getItem("seller");if(e&&!this.isEmptyObject(e)){this.form=JSON.parse(e),this.mainImg=this.const().IP+this.form.mainImg,this.restInit=this.form.rest,this.businessTimeFromInit=this.form.businessTimeFrom,this.businessTimeToInit=this.form.businessTimeTo;for(var t=0;t<this.form.storeImgs.length;t++)console.log(this.form.storeImgs[t]),this.storeImgs[t]=this.const().IP+this.form.storeImgs[t];for(var a=0;a<this.form.businessImgs.length;a++)console.log(this.form.businessImgs[a]),this.businessImgs[a]=this.const().IP+this.form.businessImgs[a];localStorage.removeItem("seller")}},methods:{submit:function(){var e=this;e.request("api/seller/createAndUpdate",{method:"POST",data:e.form,success:function(t){console.log("seller createAndUpdate res"),console.log(t);var a=JSON.parse(t.config.data);(console.log(a),a._id&&1==a.state&&e.restInit!=a.rest)&&L.a.connect(e.const().IP).emit("sellerRest",a.rest);!a._id||1!=a.state||e.businessTimeFromInit==a.businessTimeFrom&&e.businessTimeToInit==a.businessTimeTo||L.a.connect(e.const().IP).emit("businessTime",{businessTimeFrom:a.businessTimeFrom,businessTimeTo:a.businessTimeTo});e.jump("/main/seller")}})},onfilechangeMainImg:function(e){var t=this;t.imgUpload(e,function(e){t.form.mainImg=e.data.data,t.mainImg=t.const().IP+e.data.data})},onfilechangeStoreImg:function(e){var t=this;t.imgUpload(e,function(e){t.form.storeImgs.push(e.data.data),t.storeImgs.push(t.const().IP+e.data.data)})},onfilechangeBusinessImg:function(e){var t=this;t.imgUpload(e,function(e){t.form.businessImgs.push(e.data.data),t.businessImgs.push(t.const().IP+e.data.data)})},del:function(e,t){this.form[t].splice(e,1),this[t].splice(e,1)}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"form"},[a("p",{staticClass:"title"},[e._v(e._s(e.form._id?"修改":"新增")+"商家")]),e._v(" "),a("div",[a("span",{staticStyle:{float:"left"}},[e._v("主图")]),e._v(" "),a("div",{staticClass:"upload",style:{"background-image":"url("+e.mainImg+")"}},[a("input",{attrs:{type:"file",name:"photo"},on:{change:e.onfilechangeMainImg}})])]),e._v(" "),a("div",{staticStyle:{display:"flex","flex-direction":"row"}},[a("span",[e._v("店铺图片")]),e._v(" "),e._l(e.storeImgs,function(t,o){return a("div",{staticClass:"upload bgsize rel",style:{"background-image":"url("+t+")"}},[a("div",{staticClass:"del",on:{click:function(t){e.del(o,"storeImgs")}}},[e._v("X")])])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.storeImgs.length<3,expression:"storeImgs.length < 3"}],staticClass:"upload",style:{"background-image":"url("+e.imgInput+")"}},[a("input",{attrs:{type:"file",name:"photo"},on:{change:e.onfilechangeStoreImg}})])],2),e._v(" "),a("div",{staticStyle:{display:"flex","flex-direction":"row"}},[a("span",[e._v("营业资质图片")]),e._v(" "),e._l(e.businessImgs,function(t,o){return a("div",{staticClass:"upload bgsize rel",style:{"background-image":"url("+t+")"}},[a("div",{staticClass:"del",on:{click:function(t){e.del(o,"businessImgs")}}},[e._v("X")])])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.businessImgs.length<4,expression:"businessImgs.length < 4"}],staticClass:"upload",style:{"background-image":"url("+e.imgInput+")"}},[a("input",{attrs:{type:"file",name:"photo"},on:{change:e.onfilechangeBusinessImg}})])],2),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"店名"}},[a("el-input",{attrs:{placeholder:"name"},model:{value:e.form.storeName,callback:function(t){e.$set(e.form,"storeName",t)},expression:"form.storeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"距离"}},[a("el-input",{attrs:{placeholder:"explain"},model:{value:e.form.distance,callback:function(t){e.$set(e.form,"distance",t)},expression:"form.distance"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"送达需时"}},[a("el-input",{attrs:{placeholder:"sendNum"},model:{value:e.form.sendTime,callback:function(t){e.$set(e.form,"sendTime",t)},expression:"form.sendTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"月售"}},[a("el-input",{attrs:{placeholder:"praise"},model:{value:e.form.saleNum,callback:function(t){e.$set(e.form,"saleNum",t)},expression:"form.saleNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配送信息1"}},[a("el-input",{attrs:{placeholder:"price"},model:{value:e.form.distribute1,callback:function(t){e.$set(e.form,"distribute1",t)},expression:"form.distribute1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配送信息2"}},[a("el-input",{attrs:{placeholder:"price"},model:{value:e.form.distribute2,callback:function(t){e.$set(e.form,"distribute2",t)},expression:"form.distribute2"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{attrs:{placeholder:"sendNum"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"praise"},model:{value:e.form.addr,callback:function(t){e.$set(e.form,"addr",t)},expression:"form.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业时间起"}},[a("el-input",{attrs:{placeholder:"price"},model:{value:e.form.businessTimeFrom,callback:function(t){e.$set(e.form,"businessTimeFrom",t)},expression:"form.businessTimeFrom"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业时间止"}},[a("el-input",{attrs:{placeholder:"price"},model:{value:e.form.businessTimeTo,callback:function(t){e.$set(e.form,"businessTimeTo",t)},expression:"form.businessTimeTo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用状态"}},[a("el-input",{attrs:{placeholder:"state"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"休息情况"}},[a("el-input",{attrs:{placeholder:"rest"},model:{value:e.form.rest,callback:function(t){e.$set(e.form,"rest",t)},expression:"form.rest"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]};var H=a("VU/8")(V,G,!1,function(e){a("/3T2")},"data-v-baa4d7c8",null).exports,X={data:function(){return{dataList:[],currentPage:1,pageSize:10,totalSize:0}},created:function(){this.dataChange()},methods:{create:function(){this.jump("/main/userCreate")},update:function(e){var t={_id:e._id,name:e.name,password:e.phone,token:e.token};localStorage.setItem("user",m()(t)),this.jump("/main/userCreate")},deletes:function(e){var t=this;t.request("api/user/delete",{method:"POST",data:{_id:e},success:function(a){if(a.data.success)for(var o=0;o<t.dataList.length;o++)t.dataList[o]._id==e&&(t.dataList.splice(o,1),t.totalSize-=1);else t.$message(a.data.data)}})},handleSizeChange:function(e){this.pageSize=e,this.dataChange()},handleCurrentChange:function(e){this.currentPage=e,this.dataChange()},dataChange:function(){var e=this,t={name:e.name,phone:e.phone,addr:e.addr,detailAddr:e.detailAddr,openid:e.openid,pageSize:e.pageSize,currentPage:e.currentPage};e.request("api/user/find",{method:"POST",data:t,success:function(t){if(console.log("user find res"),console.log(t),t.data.success){for(var a=t.data.data,o=0;o<a.length;o++)a[o].created=e.format(new Date(a[o].created),"yyyy-MM-dd hh:mm:ss"),a[o].updated=e.format(new Date(a[o].updated),"yyyy-MM-dd hh:mm:ss");e.dataList=a,e.totalSize=t.data.total}else e.$message(t.data.data)}})}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"mt20b20"},[a("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("新增")])],1),e._v(" "),a("div",{staticStyle:{width:"1200px",margin:"auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","header-cell-style":"text-align:center;"}},[a("el-table-column",{attrs:{prop:"_id",label:"_id",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"用户名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"password",label:"密码",width:"210"}}),e._v(" "),a("el-table-column",{attrs:{prop:"token",label:"token",width:"450"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created",label:"created",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"updated",label:"updated",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.update(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.deletes(t.row._id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block mt20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var W=a("VU/8")(X,B,!1,function(e){a("gefe")},"data-v-138088eb",null).exports,Z={name:"login",data:function(){return{form:{name:"",password:"",token:""}}},created:function(){var e=localStorage.getItem("user");e&&!this.isEmptyObject(e)&&(this.form=JSON.parse(e),localStorage.removeItem("user"))},methods:{submit:function(){var e=this;e.form.password=e.encrypt(e.form.password),e.form._id?e.request("api/user/createAndUpdate",{method:"POST",data:e.form,success:function(t){e.jump("/main/user")}}):e.request("api/signup",{method:"POST",data:e.form,success:function(t){e.jump("/main/user")}})}}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"form"},[a("p",{staticClass:"title"},[e._v(e._s(e.form._id?"修改":"新增")+"用户")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{placeholder:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"token"}},[a("el-input",{attrs:{placeholder:"token"},model:{value:e.form.token,callback:function(t){e.$set(e.form,"token",t)},expression:"form.token"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]};var Q=a("VU/8")(Z,Y,!1,function(e){a("fJPn")},"data-v-19c0e60a",null).exports,K={data:function(){return{dataList:[],currentPage:1,pageSize:10,totalSize:0}},created:function(){this.dataChange()},methods:{handleSizeChange:function(e){this.pageSize=e,this.dataChange()},handleCurrentChange:function(e){this.currentPage=e,this.dataChange()},dataChange:function(){var e=this,t={token:e.token,session_key:e.session_key,openid:e.openid,pageSize:e.pageSize,currentPage:e.currentPage};e.request("api/weiUser/find",{method:"POST",data:t,success:function(t){if(console.log("weiuser find res"),console.log(t),t.data.success){for(var a=t.data.data,o=0;o<a.length;o++)a[o].created=e.format(new Date(a[o].created),"yyyy-MM-dd hh:mm:ss"),a[o].updated=e.format(new Date(a[o].updated),"yyyy-MM-dd hh:mm:ss");e.dataList=a,e.totalSize=t.data.total}else e.$message(t.data.data)}})},deletes:function(e){var t=this;t.request("api/weiUser/delete",{method:"POST",data:{_id:e},success:function(a){if(a.data.success)for(var o=0;o<t.dataList.length;o++)t.dataList[o]._id==e&&(t.dataList.splice(o,1),t.totalSize-=1);else t.$message(a.data.data)}})}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{width:"1200px",margin:"auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","header-cell-style":"text-align:center;"}},[a("el-table-column",{attrs:{prop:"_id",label:"_id",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openid",label:"openid",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"session_key",label:"session_key",width:"210"}}),e._v(" "),a("el-table-column",{attrs:{prop:"token",label:"token",width:"450"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created",label:"created",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"updated",label:"updated",width:"50","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.deletes(t.row._id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block mt20"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var te=a("VU/8")(K,ee,!1,function(e){a("4wC2")},"data-v-2b55c196",null).exports,ae={name:"login",data:function(){return{form:{name:"",phone:"",addr:"",detailAddr:"",tag:"",openid:""}}},methods:{addressCreate:function(){this.request("api/address",{method:"POST",data:this.form,success:function(e){console.log(e)}})}}},oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"form"},[a("p",{staticClass:"title"},[e._v("登录页面")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"phone"}},[a("el-input",{attrs:{placeholder:"phone"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"addr"}},[a("el-input",{attrs:{placeholder:"addr"},model:{value:e.form.addr,callback:function(t){e.$set(e.form,"addr",t)},expression:"form.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"detailAddr"}},[a("el-input",{attrs:{placeholder:"detailAddr"},model:{value:e.form.detailAddr,callback:function(t){e.$set(e.form,"detailAddr",t)},expression:"form.detailAddr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"tag"}},[a("el-input",{attrs:{placeholder:"tag"},model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"openid"}},[a("el-input",{attrs:{placeholder:"openid"},model:{value:e.form.openid,callback:function(t){e.$set(e.form,"openid",t)},expression:"form.openid"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addressCreate}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var le=a("VU/8")(ae,oe,!1,function(e){a("fbCN")},"data-v-de5b68ba",null).exports,se={name:"login",data:function(){return{form:{name:"",password:""}}},created:function(){console.log("location.href---"),console.log(location.href);var e=location.href.replace("http://","https://");console.log(e),location.href=e},methods:{login:function(){var e=this;e.request("api/user/login",{method:"POST",data:{name:e.form.name,password:e.encrypt(e.form.password)},success:function(t){t.data.success?(localStorage.setItem("token",t.data.token),e.jump("/main/address")):alert(t.data.data)}})},signup:function(){this.request("api/signup",{method:"POST",data:{name:this.form.name,password:this.encrypt(this.form.password)},success:function(e){console.log(e)}})}}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"form"},[a("p",{staticClass:"title"},[e._v("登录页面")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"请选择用户名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{placeholder:"请选择密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.signup}},[e._v("注册")])],1)],1)],1)])},staticRenderFns:[]};var ne=a("VU/8")(se,re,!1,function(e){a("ZrZv")},"data-v-d1332782",null).exports,ie={data:function(){return{index:"address"}},methods:{handleSelect:function(e,t){var a=this;"signout"==e?a.request("api/user/signout",{method:"POST",data:{token:localStorage.getItem("token")},success:function(e){e.data.success?(localStorage.clear(),a.jump("/login")):(alert(e.data.data),localStorage.clear())}}):a.jump("/main/"+e)}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.index,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"address"}},[e._v("地址管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"evaluate"}},[e._v("评价管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"goods"}},[e._v("商品管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"order"}},[e._v("订单管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"user"}},[e._v("用户管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"weiUser"}},[e._v("微信用户管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"seller"}},[e._v("商家")]),e._v(" "),a("el-menu-item",{attrs:{index:"count"}},[e._v("统计")]),e._v(" "),a("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"signout"}},[e._v("退出")])],1),e._v(" "),a("router-view")],1)},staticRenderFns:[]};var ce=a("VU/8")(ie,de,!1,function(e){a("Agrm")},"data-v-bd91d342",null).exports;r.default.use(d.a);var me=new d.a({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:ne},{path:"/main",name:"main",meta:{requireAuth:"0"},component:ce,children:[{path:"address",name:"address",component:f},{path:"addressCreate",name:"addressCreate",component:g},{path:"evaluate",name:"evaluate",component:S},{path:"evaluateCreate",name:"evaluateCreate",component:C},{path:"goods",name:"goods",component:P},{path:"goodsCreate",name:"goodsCreate",component:U},{path:"order",name:"order",component:F},{path:"orderCreate",name:"orderCreate",component:q},{path:"user",name:"user",component:W},{path:"userCreate",name:"userCreate",component:Q},{path:"weiUser",name:"weiUser",component:te},{path:"weiUserCreate",name:"weiUserCreate",component:le},{path:"seller",name:"seller",component:J},{path:"sellerCreate",name:"sellerCreate",component:H},{path:"count",name:"count",component:w}]},{path:"*",redirect:"/login"}]}),ue=a("mtWM"),pe=a.n(ue);function fe(e){if(!e)return"";var t=e.replace(/^https?:\/\//,"").replace(/\/.*$/,"").split(".").slice(-3);return"www"===t[0]&&t.shift(),t.join(".")}function he(e){return"iOS"===(weex.config.env||WXEnvironment).platform&&"string"==typeof e?e.replace(/^http\:/,"https:"):e}function ve(e){var t=Date.now()/1e3-Number(e);return t<3600?ge(~~(t/60)," minute"):t<86400?ge(~~(t/3600)," hour"):ge(~~(t/86400)," day")}function ge(e,t){return 1===e?e+t:e+t+"s"}function be(e){var t=e||"";return[["<p>","\n"],["&amp;","&"],["&amp;","&"],["&apos;","'"],["&#x27;","'"],["&#x2F;","/"],["&#39;","'"],["&#47;","/"],["&lt;","<"],["&gt;",">"],["&nbsp;"," "],["&quot;",'"']].forEach(function(e){t=t.replace(new RegExp(e[0],"ig"),e[1])}),t}var _e={methods:{jump:function(e){this.$router&&this.$router.push(e)},const:function(){var e={IP:"https://www.meizizi.store:443/"};return e.IMAGE_URL=e.IP+"/public/img",e.BGCOLOR="#d95235",e},request:function(e,t){var a,o,l=this,s={method:"GET",responseType:"json",headers:{"Content-Type":"application/json"},data:"",timeout:3e3};if("function"==typeof t)a=t;else for(var r in t)if("success"==r)a=t.success;else if("fail"==r)o=t.fail;else{s[r]=t[r];var n=localStorage.getItem("token");n&&(s.headers.Authorization=n)}s.url=l.const().IP+e,l.$http(s).then(function(e){a&&"function"==typeof a&&a(e)}).catch(function(e){if(o)"function"==typeof o&&o(res);else{for(var t in console.log("请求捕捉到的错误"),console.log(e),e)console.log(t),console.log(e[t]);401==e.response.status&&"Unauthorized"==e.response.statusText?(l.$message("登录过期请重新登录"),setTimeout(l.jump("/login"),2e3)):console.log(e.response)}})},encrypt:function(e){var t=a("Av7u"),o=t.enc.Utf8.parse("1234123412ABCDEF"),l=t.enc.Utf8.parse("ABCDEF1234123412"),s=t.enc.Utf8.parse(e);return t.AES.encrypt(s,o,{iv:l,mode:t.mode.CBC,padding:t.pad.Pkcs7}).ciphertext.toString().toUpperCase()},imgUpload:function(e,t){var a=e.target.files||e.dataTransfer.files;if(a.length){var o="image/jpeg"===a[0].type||"image/jpg",l=a[0].size/1024/1024<1;if(o)if(l){var s=new FormData;s.append("photo",a[0]),this.request("api/image/upload",{method:"POST",data:s,headers:{"Content-Type":"multipart/form-data"},success:function(e){console.log("imageUpload res"),console.log(e),"function"==typeof t&&t(e)}})}else this.$message.error("上传头像图片大小不能超过 1MB!");else this.$message.error("上传头像图片只能是 JPG 或 JPEG 或 PNG 格式!")}},format:function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var o in new RegExp(/(y+)/).test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[o]:("00"+a[o]).substr((""+a[o]).length)));return t},isEmptyObject:function(e){for(var t in e)return!1;return!0}}},we=a("zL8q"),ye=a.n(we);a("tvR6");r.default.use(ye.a),r.default.config.productionTip=!1,r.default.prototype.$http=pe.a,s()(o).forEach(function(e){r.default.filter(e,o[e])}),r.default.mixin(_e),new r.default({el:"#app",router:me,template:"<App/>",components:{App:i}})},OWj8:function(e,t){},Pfec:function(e,t){},PsJx:function(e,t){},UYaa:function(e,t){},W8LF:function(e,t){},ZrZv:function(e,t){},fJPn:function(e,t){},fbCN:function(e,t){},gefe:function(e,t){},"h/rS":function(e,t){},tvR6:function(e,t){},wL4e:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6bd677dfc2156f6c5791.js.map